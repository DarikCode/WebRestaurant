import React from 'react';

interface SignatureSVGProps {
  isVisible: boolean;
  className?: string;
}

// Each subpath split at M commands for sequential animation
const SIGNATURE_PATHS = [
  "M4.63245 631.542C143.466 462.875 457.032 116.87 616.632 78.0699C650.632 69.8043 679.456 109.77 398.256 518.57C425.535 490.661 482.013 428.174 536.132 391.849",
  "M612.132 399.042C644.932 324.642 637.132 332.375 629.132 345.542C614.771 349.263 599.414 355.533 583.649 363.56",
  "M612.132 399.042C592.966 420.747 550.932 449.695 536.132 391.849",
  "M612.132 399.042C602.878 378.348 593.101 367.688 583.649 363.56",
  "M612.132 399.042C619.632 390.209 636.232 373.242 642.632 376.042C650.632 379.542 647.132 399.042 650.632 399.042C654.132 399.042 656.132 363.042 665.132 399.042C679.966 382.875 708.732 360.242 705.132 399.042C713.799 390.375 732.932 378.242 740.132 399.042C742.466 389.709 755.032 373.842 786.632 385.042C798.966 387.209 830.732 386.142 859.132 364.542C837.132 375.209 797.232 382.942 813.632 328.542C821.466 308.875 856.932 267.942 936.132 261.542",
  "M536.132 391.849C551.989 381.207 568.019 371.52 583.649 363.56",
  "M536.132 391.849C545.181 375.266 563.688 354.842 583.649 363.56",
  "M936.132 261.542L940.098 197.812",
  "M936.132 261.542H973.632C998.971 261 988.368 227.682 970.88 194.522",
  "M936.132 261.542C933.299 324.542 943.032 448.542 1004.63 440.542C1019.13 436.375 1054.63 425.142 1080.63 413.542C1113.13 399.042 1187.13 359.542 1239.13 352.542C1291.13 345.542 1307.13 326.542 1416.13 345.542C1525.13 364.542 1533.63 378.042 1536.13 385.042",
  "M940.098 197.812L943.132 149.042C951.684 161.424 962.142 177.953 970.88 194.522",
  "M940.098 197.812C859.733 207.979 731.118 233.779 665.132 248.042",
  "M940.098 197.812C951.419 196.38 961.783 195.258 970.88 194.522",
  "M970.88 194.522C977.943 193.951 984.243 193.612 989.632 193.542C1058.97 184.875 1230.23 172.742 1360.63 193.542",
  "M366.132 0.542114C373.966 86.8755 390.532 282.142 394.132 372.542L394.191 374.002C398.641 485.767 399.678 511.797 410.132 570.542C420.632 629.542 454.632 734.542 464.132 757.542",
];

const TOTAL_DURATION = 1.5; // total time for the full signature
const SEGMENT_DRAW_TIME = 0.2; // how long each segment takes to draw
const TOTAL_STAGGER = TOTAL_DURATION - SEGMENT_DRAW_TIME; // spread delays across this window

const SignatureSVG: React.FC<SignatureSVGProps> = ({ isVisible, className }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 1542 760"
      className={className}
      fill="none"
    >
      {SIGNATURE_PATHS.map((d, i) => {
        const delay = (TOTAL_STAGGER / (SIGNATURE_PATHS.length - 1)) * i;
        return (
          <path
            key={i}
            d={d}
            stroke="white"
            strokeWidth="12"
            pathLength={1}
            strokeDasharray={1}
            strokeDashoffset={isVisible ? 0 : 1}
            style={{
              transition: `stroke-dashoffset ${SEGMENT_DRAW_TIME}s ease-in-out ${delay}s`,
            }}
          />
        );
      })}
    </svg>
  );
};

export default SignatureSVG;
